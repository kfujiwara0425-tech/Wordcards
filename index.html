let cards = [];
let currentIndex = 0;
let currentStage = 0; 
// 0 = 表, 1 = 訳, 2 = 例文

function loadCards(text) {
    const lines = text.trim().split("\n");
    cards = lines.map(line => {
        const [front, back, example] = line.split("\t");
        return { front, back, example };
    });
    currentIndex = 0;
    currentStage = 0;
    showCard();
}

function showCard() {
    if (cards.length === 0) return;

    const card = cards[currentIndex];
    let displayText = "";

    if (currentStage === 0) {
        displayText = card.front;
    } else if (currentStage === 1) {
        displayText = card.back;
    } else if (currentStage === 2) {
        displayText = card.example;
    }

    document.getElementById("card").innerText = displayText;
}

function nextStage() {
    if (currentStage < 2) {
        currentStage++;
    } else {
        currentStage = 0;
        currentIndex = (currentIndex + 1) % cards.length;
    }
    showCard();
}

document.getElementById("card").addEventListener("click", nextStage);
